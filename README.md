# 230627.kangxi-radicals

[康熙部首](https://www.unicode.org/charts/PDF/U2F00.pdf)と呼ばれる、部首を表すための文字が存在します。  
これらは常用漢字と似通ってはいますが別物であり、誤って使用した場合はうまくページ内での検索にコンテンツが引っ掛からない、ソート順が想定しているものと異なる、などの不具合を起こします。  
画像認識から文字への変換などで意図せず起こることがあり、見た目ではほとんど判断がつかないため機械的なチェックによって使用の有無を判定する必要があります。  

[康熙部首チェッカー](https://kangxi-radicals.netlify.app/)

ブックマークレットとして作成しているため、上記ページ内のボタンからコードをコピーし、ブラウザの Bookmark URL に追加して使用してください。

## 実装仕様

Web ページ内のテキストに対して Unicode [\u2F00-\u2FD5] に対して正規表現での検索をかけ、康熙部首に相当する箇所をハイライトしてポップアップに表示します。
検索対象として、下記の文字が該当します。

```
⼀⼁⼂⼃⼄⼅⼆⼇⼈⼉⼊⼋⼌⼍⼎⼏⼐⼑⼒⼓⼔⼕⼖⼗⼘⼙⼚⼛⼜⼝⼞⼟⼠⼡⼢⼣⼤⼥⼦⼧⼨⼩⼪⼫⼬⼭⼮⼯⼰⼱⼲⼳⼴⼵⼶⼷⼸⼹⼺⼻⼼⼽⼾⼿⽀⽁⽂⽃⽄⽅⽆⽇⽈⽉⽊⽋⽌⽍⽎⽏⽐⽑⽒⽓⽔⽕⽖⽗⽘⽙⽚⽛⽜⽝⽞⽟⽠⽡⽢⽣⽤⽥⽦⽧⽨⽩⽪⽫⽬⽭⽮⽯⽰⽱⽲⽳⽴⽵⽶⽷⽸⽹⽺⽻⽼⽽⽾⽿⾀⾁⾂⾃⾄⾅⾆⾇⾈⾉⾊⾋⾌⾍⾎⾏⾐⾑⾒⾓⾔⾕⾖⾗⾘⾙⾚⾛⾜⾝⾞⾟⾠⾡⾢⾣⾤⾥⾦⾧⾨⾩⾪⾫⾬⾭⾮⾯⾰⾱⾲⾳⾴⾵⾶⾷⾸⾹⾺⾻⾼⾽⾾⾿⿀⿁⿂⿃⿄⿅⿆⿇⿈⿉⿊⿋⿌⿍⿎⿏⿐⿑⿒⿓⿔⿕
```

230727  
CJK 部首補助（Unicode [\u2E80-\u2EFF]）のチェックを追加しました。

## 開発

### ディレクトリ構成

```
├── bookmarklet
│   ├── dist
│   └── src
├── dist
│   └── assets
└── src
```

康熙部首チェッカーの Web ページと bookmarklet のビルドを別プロセスで行っています。  
Web ページを構成する index.html とその関連ファイルは Vite を経由しますが、  
bookmarklet 自体は bookmarklet/src 配下の .ts ファイルから Rollup.js にて iife 形式でバンドルされ、bookmarklet/dist 配下に出力されます。  
現状では bookmarklet/dist/checkKangxiRadicals.js を src/main.ts に直接ペーストする方法をとっています。